---
const ITEMS = [
  {
    link: '/blog',
    label: 'Blog'
  },
  {
    link: '/projects',
    label: 'Projects'
  },
  {
    link: '/links',
    label: 'Links'
  },
  {
    link: '/about',
    label: 'About'
  }
]
---

<header class='mb-12 flex w-full flex-wrap pb-3 text-sm sm:flex-nowrap sm:justify-start'>
  <nav
    class='relative mx-auto flex w-full items-center justify-between sm:flex sm:items-center'
    aria-label='global'
  >
    <a class='flex-none text-xl font-semibold' href='/' aria-label='Brand'>CWorld Site</a>

    <div class='flex flex-row items-center justify-center gap-x-5 sm:gap-x-7'>
      {
        ITEMS.map((item) => (
          <a
            href={item.link}
            class='flex-none text-[1.05rem] font-medium hover:text-primary'
            aria-label='Nav Menu Item'
          >
            {item.label}
          </a>
        ))
      }

      <button
        id='toggleDarkMode'
        class='relative rounded-md border border-border p-1.5 transition-all hover:bg-border'
      >
        <span class='sr-only'>Dark Theme</span>
        <svg class='size-5 transition-all dark:hidden'>
          <use href='/src/assets/icons/header.svg#mingcute-sun-line'></use>
        </svg>
        <svg class='hidden size-5 transition-all dark:block'>
          <use href='/src/assets/icons/header.svg#mingcute-moon-stars-line'></use>
        </svg>
      </button>
    </div>
  </nav>
</header>

<script>
  function getCurrentTheme() {
    return localStorage.getItem('theme')
  }
  const toggleDarkModeButton = document.getElementById('toggleDarkMode')

  toggleDarkModeButton?.addEventListener('click', () => {
    const toggleDarkModeEvent = new CustomEvent('theme-change', {
      detail: { theme: getCurrentTheme() === 'light' ? 'dark' : 'light' }
    })
    document.dispatchEvent(toggleDarkModeEvent)
  })
</script>
