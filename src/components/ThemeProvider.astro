---

---

{/* Use inline mode to quick load color, which can avoid splash */}
<script is:inline>
  let theme = localStorage.getItem('theme')
  // If undefined or 'system', get from system
  if (!theme || theme === 'system') {
    theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
  }
  document.documentElement.classList.toggle('dark', theme === 'dark')
  document
    .querySelector('meta[name="theme-color"]')
    ?.setAttribute('content', theme === 'dark' ? '#0B0B10' : '#FCFCFD')
</script>
<script>
  import { setTheme } from '@/utils/theme'

  document.addEventListener('astro:after-swap', () => setTheme())
  // Old way: dispatch event
  // document.addEventListener('theme-change', () => setTheme(undefined, true) )
</script>
